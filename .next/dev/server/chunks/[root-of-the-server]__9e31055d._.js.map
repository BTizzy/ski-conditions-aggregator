{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 58, "column": 0}, "map": {"version":3,"sources":["file:///Users/ryanbartell/ski-conditions-aggregator/app/api/radar/debug-screenshot/route.ts"],"sourcesContent":["import { NextRequest, NextResponse } from 'next/server';\nimport fs from 'fs';\nimport path from 'path';\n\nexport async function POST(req: NextRequest) {\n  try {\n    const body = await req.json();\n    const { name, data } = body;\n    if (!data || typeof data !== 'string') return NextResponse.json({ ok: false, error: 'no data' }, { status: 400 });\n\n    // data is a dataURL like 'data:image/png;base64,....'\n    const matches = data.match(/^data:(image\\/(png|jpeg));base64,(.*)$/);\n    if (!matches) return NextResponse.json({ ok: false, error: 'invalid data url' }, { status: 400 });\n\n    const base64 = matches[3];\n    const buffer = Buffer.from(base64, 'base64');\n\n    const outDir = path.join(process.cwd(), 'public', 'debug-screenshots');\n    try { fs.mkdirSync(outDir, { recursive: true }); } catch(e) {}\n    const filename = `${name || 'screenshot'}_${Date.now()}.png`;\n    const outPath = path.join(outDir, filename);\n    fs.writeFileSync(outPath, buffer);\n\n    return NextResponse.json({ ok: true, path: `/debug-screenshots/${filename}` });\n  } catch (e: any) {\n    return NextResponse.json({ ok: false, error: e?.message || String(e) }, { status: 500 });\n  }\n}\n"],"names":[],"mappings":";;;;AAAA;AACA;AACA;;;;AAEO,eAAe,KAAK,GAAgB;IACzC,IAAI;QACF,MAAM,OAAO,MAAM,IAAI,IAAI;QAC3B,MAAM,EAAE,IAAI,EAAE,IAAI,EAAE,GAAG;QACvB,IAAI,CAAC,QAAQ,OAAO,SAAS,UAAU,OAAO,gJAAY,CAAC,IAAI,CAAC;YAAE,IAAI;YAAO,OAAO;QAAU,GAAG;YAAE,QAAQ;QAAI;QAE/G,sDAAsD;QACtD,MAAM,UAAU,KAAK,KAAK,CAAC;QAC3B,IAAI,CAAC,SAAS,OAAO,gJAAY,CAAC,IAAI,CAAC;YAAE,IAAI;YAAO,OAAO;QAAmB,GAAG;YAAE,QAAQ;QAAI;QAE/F,MAAM,SAAS,OAAO,CAAC,EAAE;QACzB,MAAM,SAAS,OAAO,IAAI,CAAC,QAAQ;QAEnC,MAAM,SAAS,4GAAI,CAAC,IAAI,CAAC,QAAQ,GAAG,IAAI,UAAU;QAClD,IAAI;YAAE,wGAAE,CAAC,SAAS,CAAC,QAAQ;gBAAE,WAAW;YAAK;QAAI,EAAE,OAAM,GAAG,CAAC;QAC7D,MAAM,WAAW,GAAG,QAAQ,aAAa,CAAC,EAAE,KAAK,GAAG,GAAG,IAAI,CAAC;QAC5D,MAAM,UAAU,4GAAI,CAAC,IAAI,CAAC,QAAQ;QAClC,wGAAE,CAAC,aAAa,CAAC,SAAS;QAE1B,OAAO,gJAAY,CAAC,IAAI,CAAC;YAAE,IAAI;YAAM,MAAM,CAAC,mBAAmB,EAAE,UAAU;QAAC;IAC9E,EAAE,OAAO,GAAQ;QACf,OAAO,gJAAY,CAAC,IAAI,CAAC;YAAE,IAAI;YAAO,OAAO,GAAG,WAAW,OAAO;QAAG,GAAG;YAAE,QAAQ;QAAI;IACxF;AACF"}}]
}