{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/ryanbartell/ski-conditions-aggregator/app/components/RadarTimeline.tsx"],"sourcesContent":["\"use client\";\n\nimport React from 'react';\n\ninterface RadarTimelineProps {\n  frames: Array<{ time?: number; url: string }>;\n  currentFrameIndex: number;\n  isPlaying: boolean;\n  onFrameSelect: (index: number) => void;\n  onPlayPause: () => void;\n}\n\nconst RadarTimeline: React.FC<RadarTimelineProps> = ({\n  frames,\n  currentFrameIndex,\n  isPlaying,\n  onFrameSelect,\n  onPlayPause,\n}) => {\n  // Filter out frames without time\n  const validFrames = frames.filter(frame => frame.time != null);\n  if (validFrames.length === 0) return null;\n\n  const currentFrame = validFrames[currentFrameIndex] || validFrames[0];\n  const startTime = validFrames[0]?.time || 0;\n  const endTime = validFrames[validFrames.length - 1]?.time || 0;\n  const totalDuration = endTime - startTime;\n\n  const formatTime = (timestamp: number) => {\n    const date = new Date(timestamp);\n    const now = Date.now();\n    const diffHours = Math.floor((now - timestamp) / (1000 * 60 * 60));\n\n    if (diffHours === 0) return 'Now';\n    if (diffHours === 1) return '1h ago';\n    if (diffHours < 24) return `${diffHours}h ago`;\n\n    const diffDays = Math.floor(diffHours / 24);\n    if (diffDays === 1) return '1d ago';\n    return `${diffDays}d ago`;\n  };\n\n  const getProgress = () => {\n    if (totalDuration === 0 || !currentFrame.time) return 0;\n    return ((currentFrame.time - startTime) / totalDuration) * 100;\n  };\n\n  const handleTimelineClick = (event: React.MouseEvent<HTMLDivElement>) => {\n    const rect = event.currentTarget.getBoundingClientRect();\n    const clickX = event.clientX - rect.left;\n    const progress = clickX / rect.width;\n    const targetTime = startTime + (progress * totalDuration);\n\n    // Find the closest frame\n    let closestIndex = 0;\n    let minDiff = Math.abs((validFrames[0]?.time || 0) - targetTime);\n\n    validFrames.forEach((frame, index) => {\n      if (!frame.time) return;\n      const diff = Math.abs(frame.time - targetTime);\n      if (diff < minDiff) {\n        minDiff = diff;\n        closestIndex = index;\n      }\n    });\n\n    onFrameSelect(closestIndex);\n  };\n\n  return (\n    <div className=\"absolute bottom-4 left-4 right-4 z-50 bg-white/95 backdrop-blur-md rounded-xl shadow-xl p-4 max-w-md border border-gray-200\">\n      <div className=\"flex items-center justify-between mb-3\">\n        <div className=\"flex items-center gap-3\">\n          <button\n            onClick={onPlayPause}\n            className={`w-10 h-10 rounded-full flex items-center justify-center transition-all duration-200 font-bold text-lg shadow-md ${\n              isPlaying\n                ? 'bg-red-500 hover:bg-red-600 text-white'\n                : 'bg-green-500 hover:bg-green-600 text-white'\n            }`}\n            title={isPlaying ? 'Pause radar animation' : 'Play radar animation'}\n          >\n            {isPlaying ? '‚è∏' : '‚ñ∂'}\n          </button>\n          <div className=\"text-sm font-semibold text-gray-800\">\n            Radar: <span className=\"text-blue-600 font-bold\">\n              {currentFrame.time ? formatTime(currentFrame.time) : 'Unknown'}\n            </span>\n          </div>\n        </div>\n        <div className=\"text-xs text-gray-500 bg-gray-100 px-2 py-1 rounded-md\">\n          {frames.length} frames ‚Ä¢ {Math.round(totalDuration / (1000 * 60 * 60))}h range\n        </div>\n      </div>\n\n      {/* Timeline */}\n      <div\n        className=\"relative h-3 bg-gray-200 rounded-full cursor-pointer hover:bg-gray-300 transition-colors shadow-inner\"\n        onClick={handleTimelineClick}\n      >\n        {/* Progress bar */}\n        <div\n          className=\"absolute top-0 left-0 h-full bg-gradient-to-r from-blue-500 to-blue-600 rounded-full transition-all duration-200 shadow-md\"\n          style={{ width: `${getProgress()}%` }}\n        />\n\n        {/* Current position indicator */}\n        <div\n          className=\"absolute top-1/2 transform -translate-y-1/2 w-4 h-4 bg-white border-2 border-blue-500 rounded-full shadow-lg hover:scale-110 transition-transform\"\n          style={{ left: `${getProgress()}%`, transform: 'translate(-50%, -50%)' }}\n        />\n\n        {/* Frame markers */}\n        <div className=\"absolute inset-0 flex items-center\">\n          {validFrames.map((frame, index) => {\n            if (!frame.time) return null;\n            const position = totalDuration > 0 ? ((frame.time - startTime) / totalDuration) * 100 : 0;\n            return (\n              <div\n                key={index}\n                className=\"absolute w-1 h-2 bg-blue-400 rounded-full opacity-60 hover:opacity-100 hover:h-3 transition-all\"\n                style={{ left: `${position}%` }}\n                title={formatTime(frame.time)}\n              />\n            );\n          })}\n        </div>\n      </div>\n\n      {/* Time labels */}\n      <div className=\"flex justify-between mt-1 text-xs text-gray-500\">\n        <span>{formatTime(startTime)}</span>\n        <span>{formatTime(endTime)}</span>\n      </div>\n    </div>\n  );\n};\n\nexport default RadarTimeline;"],"names":[],"mappings":"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"}},
    {"offset": {"line": 208, "column": 0}, "map": {"version":3,"sources":["file:///Users/ryanbartell/ski-conditions-aggregator/app/components/RadarControls.tsx"],"sourcesContent":["'use client';\nimport { useState } from 'react';\nimport { Play, Pause, Settings } from 'lucide-react';\n\ninterface RadarControlsProps {\n  isPlaying: boolean;\n  onPlayPause: () => void;\n  opacity: number;\n  onOpacityChange: (value: number) => void;\n  speed: number;\n  onSpeedChange: (value: number) => void;\n  frameCount: number;\n  currentFrame: number;\n  radarSource: string;\n}\n\nexport default function RadarControls({\n  isPlaying,\n  onPlayPause,\n  opacity,\n  onOpacityChange,\n  speed,\n  onSpeedChange,\n  frameCount,\n  currentFrame,\n  radarSource\n}: RadarControlsProps) {\n  return (\n    <div className=\"fixed bottom-8 left-1/2 -translate-x-1/2 z-50\n                    bg-white/10 backdrop-blur-xl rounded-2xl\n                    border border-white/20 shadow-2xl p-6 min-w-[400px]\">\n\n      {/* Header */}\n      <div className=\"flex items-center justify-between mb-4\">\n        <div className=\"flex items-center gap-2\">\n          <div className=\"w-3 h-3 rounded-full bg-green-400 animate-pulse\" />\n          <span className=\"text-white font-semibold text-sm\">\n            {radarSource === 'synthetic' ? 'üß™ Synthetic Radar' : 'üõ∞Ô∏è Live Radar'}\n          </span>\n        </div>\n        <span className=\"text-white/60 text-xs font-mono\">\n          {currentFrame}/{frameCount}\n        </span>\n      </div>\n\n      {/* Play/Pause Button */}\n      <button\n        onClick={onPlayPause}\n        className=\"w-full mb-4 bg-gradient-to-r from-blue-500 to-purple-600\n                   hover:from-blue-600 hover:to-purple-700\n                   text-white font-bold py-3 px-6 rounded-xl\n                   flex items-center justify-center gap-2\n                   transition-all duration-200 shadow-lg hover:shadow-xl\n                   active:scale-95\"\n      >\n        {isPlaying ? <Pause size={20} /> : <Play size={20} />}\n        {isPlaying ? 'Pause' : 'Play'} Animation\n      </button>\n\n      {/* Controls Grid */}\n      <div className=\"grid grid-cols-2 gap-4\">\n\n        {/* Opacity Control */}\n        <div>\n          <label className=\"text-white/80 text-xs font-semibold mb-2 block\">\n            Opacity\n          </label>\n          <input\n            type=\"range\"\n            min=\"0\"\n            max=\"1\"\n            step=\"0.05\"\n            value={opacity}\n            onChange={(e) => onOpacityChange(Number(e.target.value))}\n            className=\"w-full h-2 bg-white/20 rounded-lg appearance-none\n                       cursor-pointer [&::-webkit-slider-thumb]:appearance-none\n                       [&::-webkit-slider-thumb]:w-4 [&::-webkit-slider-thumb]:h-4\n                       [&::-webkit-slider-thumb]:rounded-full\n                       [&::-webkit-slider-thumb]:bg-gradient-to-r\n                       [&::-webkit-slider-thumb]:from-blue-400\n                       [&::-webkit-slider-thumb]:to-purple-500\n                       [&::-webkit-slider-thumb]:shadow-lg\n                       [&::-webkit-slider-thumb]:cursor-pointer\"\n          />\n          <div className=\"text-white/60 text-xs mt-1 text-center\">\n            {Math.round(opacity * 100)}%\n          </div>\n        </div>\n\n        {/* Speed Control */}\n        <div>\n          <label className=\"text-white/80 text-xs font-semibold mb-2 block\">\n            Speed\n          </label>\n          <input\n            type=\"range\"\n            min=\"100\"\n            max=\"2000\"\n            step=\"50\"\n            value={speed}\n            onChange={(e) => onSpeedChange(Number(e.target.value))}\n            className=\"w-full h-2 bg-white/20 rounded-lg appearance-none\n                       cursor-pointer [&::-webkit-slider-thumb]:appearance-none\n                       [&::-webkit-slider-thumb]:w-4 [&::-webkit-slider-thumb]:h-4\n                       [&::-webkit-slider-thumb]:rounded-full\n                       [&::-webkit-slider-thumb]:bg-gradient-to-r\n                       [&::-webkit-slider-thumb]:from-green-400\n                       [&::-webkit-slider-thumb]:to-blue-500\n                       [&::-webkit-slider-thumb]:shadow-lg\n                       [&::-webkit-slider-thumb]:cursor-pointer\"\n          />\n          <div className=\"text-white/60 text-xs mt-1 text-center\">\n            {(2000 - speed)}ms\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}"],"names":[],"mappings":";;;;;AAEA;AAAA;AAFA;;;AAgBe,SAAS,cAAc,EACpC,SAAS,EACT,WAAW,EACX,OAAO,EACP,eAAe,EACf,KAAK,EACL,aAAa,EACb,UAAU,EACV,YAAY,EACZ,WAAW,EACQ;IACnB,qBACE,6LAAC;QAAI,WAAU;;0BAKb,6LAAC;gBAAI,WAAU;;kCACb,6LAAC;wBAAI,WAAU;;0CACb,6LAAC;gCAAI,WAAU;;;;;;0CACf,6LAAC;gCAAK,WAAU;0CACb,gBAAgB,cAAc,uBAAuB;;;;;;;;;;;;kCAG1D,6LAAC;wBAAK,WAAU;;4BACb;4BAAa;4BAAE;;;;;;;;;;;;;0BAKpB,6LAAC;gBACC,SAAS;gBACT,WAAU;;oBAOT,0BAAY,6LAAC,gNAAK;wBAAC,MAAM;;;;;6CAAS,6LAAC,6MAAI;wBAAC,MAAM;;;;;;oBAC9C,YAAY,UAAU;oBAAO;;;;;;;0BAIhC,6LAAC;gBAAI,WAAU;;kCAGb,6LAAC;;0CACC,6LAAC;gCAAM,WAAU;0CAAiD;;;;;;0CAGlE,6LAAC;gCACC,MAAK;gCACL,KAAI;gCACJ,KAAI;gCACJ,MAAK;gCACL,OAAO;gCACP,UAAU,CAAC,IAAM,gBAAgB,OAAO,EAAE,MAAM,CAAC,KAAK;gCACtD,WAAU;;;;;;0CAUZ,6LAAC;gCAAI,WAAU;;oCACZ,KAAK,KAAK,CAAC,UAAU;oCAAK;;;;;;;;;;;;;kCAK/B,6LAAC;;0CACC,6LAAC;gCAAM,WAAU;0CAAiD;;;;;;0CAGlE,6LAAC;gCACC,MAAK;gCACL,KAAI;gCACJ,KAAI;gCACJ,MAAK;gCACL,OAAO;gCACP,UAAU,CAAC,IAAM,cAAc,OAAO,EAAE,MAAM,CAAC,KAAK;gCACpD,WAAU;;;;;;0CAUZ,6LAAC;gCAAI,WAAU;;oCACX,OAAO;oCAAO;;;;;;;;;;;;;;;;;;;;;;;;;AAM5B;KAtGwB"}},
    {"offset": {"line": 398, "column": 0}, "map": {"version":3,"sources":["file:///Users/ryanbartell/ski-conditions-aggregator/app/components/ResortSidebar.tsx"],"sourcesContent":["'use client';\nimport { useState } from 'react';\nimport { Search, Filter, TrendingDown } from 'lucide-react';\n\ninterface Resort {\n  id: string;\n  name: string;\n  state: string;\n  recentSnowfall: number;\n  snowDepth: number;\n  baseTemp: number;\n}\n\nexport default function ResortSidebar({ resorts }: { resorts: Resort[] }) {\n  const [search, setSearch] = useState('');\n  const [sortBy, setSortBy] = useState<'snowfall' | 'name'>('snowfall');\n\n  const filtered = resorts\n    .filter(r => r.name.toLowerCase().includes(search.toLowerCase()))\n    .sort((a, b) => {\n      if (sortBy === 'snowfall') return b.recentSnowfall - a.recentSnowfall;\n      return a.name.localeCompare(b.name);\n    });\n\n  return (\n    <div className=\"fixed right-4 top-4 bottom-4 w-80\n                    bg-white/10 backdrop-blur-xl rounded-2xl\n                    border border-white/20 shadow-2xl overflow-hidden\n                    flex flex-col\">\n\n      {/* Header */}\n      <div className=\"p-4 border-b border-white/10\">\n        <h2 className=\"text-white font-bold text-lg mb-3\">\n          Resort Conditions\n        </h2>\n\n        {/* Search */}\n        <div className=\"relative mb-3\">\n          <Search className=\"absolute left-3 top-1/2 -translate-y-1/2 text-white/40\" size={18} />\n          <input\n            type=\"text\"\n            placeholder=\"Search resorts...\"\n            value={search}\n            onChange={(e) => setSearch(e.target.value)}\n            className=\"w-full pl-10 pr-4 py-2 bg-white/10 border border-white/20\n                       rounded-lg text-white placeholder-white/40\n                       focus:outline-none focus:ring-2 focus:ring-blue-400\"\n          />\n        </div>\n\n        {/* Sort Toggle */}\n        <button\n          onClick={() => setSortBy(s => s === 'snowfall' ? 'name' : 'snowfall')}\n          className=\"text-xs text-white/60 hover:text-white flex items-center gap-1\"\n        >\n          <Filter size={14} />\n          Sort by: {sortBy === 'snowfall' ? 'Snowfall' : 'Name'}\n        </button>\n      </div>\n\n      {/* Resort List */}\n      <div className=\"flex-1 overflow-y-auto p-2\">\n        {filtered.map(resort => (\n          <div\n            key={resort.id}\n            className=\"p-3 mb-2 bg-white/5 hover:bg-white/10 rounded-xl\n                       border border-white/10 cursor-pointer\n                       transition-all duration-200\"\n          >\n            <div className=\"flex justify-between items-start mb-2\">\n              <div>\n                <h3 className=\"text-white font-semibold text-sm\">\n                  {resort.name}\n                </h3>\n                <p className=\"text-white/60 text-xs\">{resort.state}</p>\n              </div>\n              <div className=\"text-blue-400 font-bold text-lg\">\n                {resort.recentSnowfall}\"\n              </div>\n            </div>\n            <div className=\"flex gap-3 text-xs text-white/60\">\n              <span>Base: {resort.snowDepth}\"</span>\n              <span>Temp: {resort.baseTemp}¬∞F</span>\n            </div>\n          </div>\n        ))}\n      </div>\n    </div>\n  );\n}"],"names":[],"mappings":";;;;;AACA;AACA;AAAA;;;AAFA;;;AAae,SAAS,cAAc,EAAE,OAAO,EAAyB;;IACtE,MAAM,CAAC,QAAQ,UAAU,GAAG,IAAA,yKAAQ,EAAC;IACrC,MAAM,CAAC,QAAQ,UAAU,GAAG,IAAA,yKAAQ,EAAsB;IAE1D,MAAM,WAAW,QACd,MAAM,CAAC,CAAA,IAAK,EAAE,IAAI,CAAC,WAAW,GAAG,QAAQ,CAAC,OAAO,WAAW,KAC5D,IAAI,CAAC,CAAC,GAAG;QACR,IAAI,WAAW,YAAY,OAAO,EAAE,cAAc,GAAG,EAAE,cAAc;QACrE,OAAO,EAAE,IAAI,CAAC,aAAa,CAAC,EAAE,IAAI;IACpC;IAEF,qBACE,6LAAC;QAAI,WAAU;;0BAMb,6LAAC;gBAAI,WAAU;;kCACb,6LAAC;wBAAG,WAAU;kCAAoC;;;;;;kCAKlD,6LAAC;wBAAI,WAAU;;0CACb,6LAAC,mNAAM;gCAAC,WAAU;gCAAyD,MAAM;;;;;;0CACjF,6LAAC;gCACC,MAAK;gCACL,aAAY;gCACZ,OAAO;gCACP,UAAU,CAAC,IAAM,UAAU,EAAE,MAAM,CAAC,KAAK;gCACzC,WAAU;;;;;;;;;;;;kCAOd,6LAAC;wBACC,SAAS,IAAM,UAAU,CAAA,IAAK,MAAM,aAAa,SAAS;wBAC1D,WAAU;;0CAEV,6LAAC,mNAAM;gCAAC,MAAM;;;;;;4BAAM;4BACV,WAAW,aAAa,aAAa;;;;;;;;;;;;;0BAKnD,6LAAC;gBAAI,WAAU;0BACZ,SAAS,GAAG,CAAC,CAAA,uBACZ,6LAAC;wBAEC,WAAU;;0CAIV,6LAAC;gCAAI,WAAU;;kDACb,6LAAC;;0DACC,6LAAC;gDAAG,WAAU;0DACX,OAAO,IAAI;;;;;;0DAEd,6LAAC;gDAAE,WAAU;0DAAyB,OAAO,KAAK;;;;;;;;;;;;kDAEpD,6LAAC;wCAAI,WAAU;;4CACZ,OAAO,cAAc;4CAAC;;;;;;;;;;;;;0CAG3B,6LAAC;gCAAI,WAAU;;kDACb,6LAAC;;4CAAK;4CAAO,OAAO,SAAS;4CAAC;;;;;;;kDAC9B,6LAAC;;4CAAK;4CAAO,OAAO,QAAQ;4CAAC;;;;;;;;;;;;;;uBAlB1B,OAAO,EAAE;;;;;;;;;;;;;;;;AAyB1B;GA5EwB;KAAA"}},
    {"offset": {"line": 595, "column": 0}, "map": {"version":3,"sources":["file:///Users/ryanbartell/ski-conditions-aggregator/app/components/ResortMap.tsx"],"sourcesContent":["\"use client\";\n\nimport React, { useEffect, useRef, useState } from 'react';\nimport * as L from 'leaflet';\nimport 'leaflet/dist/leaflet.css';\nimport RadarTimeline from './RadarTimeline';\nimport RadarControls from './RadarControls';\nimport ResortSidebar from './ResortSidebar';\n\ninterface Resort {\n  id: string;\n  name: string;\n  state: string;\n  lat: number;\n  lon: number;\n  elevationFt?: number;\n  scrapeUrl?: string;\n  conditionsUrl?: string;\n}\n\ninterface ResortConditions {\n  resortId: string;\n  snowDepth: number;\n  recentSnowfall: number;\n  recentRainfall?: number;\n  weeklySnowfall?: number;\n  weeklyRainfall?: number;\n  baseTemp: number;\n  windSpeed: number;\n  visibility: string;\n  timestamp: string;\n}\n\ninterface ResortMapProps {\n  resorts?: Resort[];\n  conditions?: Record<string, ResortConditions | null>;\n  loading?: Record<string, boolean>;\n  errors?: Record<string, string | null>;\n}\n\nconst ResortMap: React.FC<ResortMapProps> = ({\n  resorts = [],\n  conditions = {},\n  loading = {},\n  errors = {},\n}) => {\n  const containerRef = useRef<HTMLDivElement | null>(null);\n  const mapRef = useRef<L.Map | null>(null);\n  const markersRef = useRef<Map<string, L.CircleMarker>>(new Map());\n  const canvasRef = useRef<HTMLCanvasElement | null>(null);\n  const canvas2Ref = useRef<HTMLCanvasElement | null>(null);\n  const popupsRef = useRef<Map<string, L.Popup>>(new Map());\n  \n  const [radarPlaying, setRadarPlaying] = useState(true);\n  const [radarSpeedMs, setRadarSpeedMs] = useState(800);\n  const [radarOpacity, setRadarOpacity] = useState(0.6);\n  const [radarFramesAvailable, setRadarFramesAvailable] = useState(false);\n  const [frameCount, setFrameCount] = useState(0);\n  const [loadingStatus, setLoadingStatus] = useState('Initializing map...');\n  const [mapReady, setMapReady] = useState(false);\n  const [selectedResort, setSelectedResort] = useState<{ resort: Resort; conditions: ResortConditions } | null>(null);\n  const [radarSource, setRadarSource] = useState('synthetic');\n  const [currentFrameTime, setCurrentFrameTime] = useState<number | null>(null);\n\n  const radarFramesRef = useRef<Array<{ url: string; time?: number }>>([]); \n  const radarIndexRef = useRef(0);\n  const radarPlayingRef = useRef(true);\n  const tileBitmapCache = useRef<Map<string, ImageBitmap>>(new Map());\n  const frameCanvasCache = useRef<Map<string, HTMLCanvasElement>>(new Map());\n  const rafRef = useRef<number | null>(null);\n  const lastRenderTimeRef = useRef(0);\n  const mapPanZoomRef = useRef({ panning: false, zooming: false });\n\n  // Timeline handlers\n  const handleFrameSelect = (index: number) => {\n    radarIndexRef.current = index;\n    setRadarPlaying(false);\n    radarPlayingRef.current = false;\n  };\n\n  const handlePlayPause = () => {\n    const newPlaying = !radarPlaying;\n    setRadarPlaying(newPlaying);\n    radarPlayingRef.current = newPlaying;\n  };\n\n  // Initialize map\n  useEffect(() => {\n    if (mapRef.current) return;\n    if (!containerRef.current) return;\n    if (containerRef.current.innerHTML !== '') containerRef.current.innerHTML = '';\n\n    console.log('[Map] Starting initialization...');\n\n    try {\n      const map = L.map(containerRef.current, {\n        center: [43.5, -71.5],\n        zoom: 7,\n        scrollWheelZoom: true,\n      });\n\n      L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {\n        attribution: '&copy; OpenStreetMap contributors',\n        maxZoom: 19,\n      }).addTo(map);\n\n      mapRef.current = map;\n\n      if (!map.getPane('radarPane')) map.createPane('radarPane');\n      const radarPane = map.getPane('radarPane') as HTMLElement;\n      radarPane.style.zIndex = '400';\n      radarPane.style.pointerEvents = 'none';\n\n      const markerPane = map.getPane('markerPane') as HTMLElement;\n      markerPane.style.zIndex = '700';\n\n      const container2 = document.createElement('div');\n      container2.style.position = 'absolute';\n      container2.style.left = '0';\n      container2.style.top = '0';\n      container2.style.width = '100%';\n      container2.style.height = '100%';\n      container2.style.pointerEvents = 'none';\n\n      // Create two canvases for smooth cross-fading\n      const canvas1 = document.createElement('canvas');\n      canvas1.style.position = 'absolute';\n      canvas1.style.left = '0';\n      canvas1.style.top = '0';\n      canvas1.style.pointerEvents = 'none';\n      canvas1.style.opacity = '1';\n      canvas1.style.willChange = 'opacity';\n\n      const canvas2 = document.createElement('canvas');\n      canvas2.style.position = 'absolute';\n      canvas2.style.left = '0';\n      canvas2.style.top = '0';\n      canvas2.style.pointerEvents = 'none';\n      canvas2.style.opacity = '0';\n      canvas2.style.willChange = 'opacity';\n\n      container2.appendChild(canvas1);\n      container2.appendChild(canvas2);\n      radarPane.appendChild(container2);\n      canvasRef.current = canvas1;\n      canvas2Ref.current = canvas2;\n\n      const resizeCanvas = () => {\n        if (!canvas1 || !canvas2 || !map) return;\n        const size = map.getSize();\n        const dpr = window.devicePixelRatio || 1;\n        canvas1.width = size.x * dpr;\n        canvas1.height = size.y * dpr;\n        canvas1.style.width = `${size.x}px`;\n        canvas1.style.height = `${size.y}px`;\n        const ctx1 = canvas1.getContext('2d');\n        if (ctx1) ctx1.setTransform(dpr, 0, 0, dpr, 0, 0);\n\n        canvas2.width = size.x * dpr;\n        canvas2.height = size.y * dpr;\n        canvas2.style.width = `${size.x}px`;\n        canvas2.style.height = `${size.y}px`;\n        const ctx2 = canvas2.getContext('2d');\n        if (ctx2) ctx2.setTransform(dpr, 0, 0, dpr, 0, 0);\n        // Don't clear cache on resize - let it rebuild naturally to prevent flashing\n      };\n\n      resizeCanvas();\n      map.on('resize', resizeCanvas);\n      \n      map.on('movestart', () => { mapPanZoomRef.current.panning = true; });\n      map.on('moveend', () => {\n        mapPanZoomRef.current.panning = false;\n        // Don't clear cache immediately, let it rebuild naturally\n        setTimeout(() => frameCanvasCache.current.clear(), 1000);\n      });\n      map.on('zoomstart', () => { mapPanZoomRef.current.zooming = true; });\n      map.on('zoomend', () => {\n        mapPanZoomRef.current.zooming = false;\n        // Don't clear cache immediately, let it rebuild naturally\n        setTimeout(() => frameCanvasCache.current.clear(), 1000);\n      });\n\n      setTimeout(() => map.invalidateSize(), 200);\n\n      console.log('[Map] Initialization complete');\n      setMapReady(true);\n      setLoadingStatus('Map ready. Loading frames...');\n    } catch (error) {\n      console.error('[Map] Initialization failed:', error);\n      setLoadingStatus('Map initialization failed');\n    }\n  }, []);\n\n  // Load radar frames - try REAL radar first, synthetic as fallback\n  useEffect(() => {\n    if (!mapReady) return;\n\n    const loadFrames = async () => {\n      try {\n        // Clear any existing cache and force fresh data\n        console.log('[Frames] Loading radar frames with cache busting...');\n\n        // Try multi-source radar system (NOAA, RainViewer, OpenWeatherMap)\n        const radarRes = await fetch(`/api/radar/frames?t=${Date.now()}`, {\n          signal: AbortSignal.timeout(8000),\n          headers: {\n            'Cache-Control': 'no-cache',\n            'Pragma': 'no-cache'\n          }\n        });\n\n        if (radarRes.ok) {\n          const data = await radarRes.json();\n          const frames = data?.radar?.past || [];\n\n          if (frames.length > 0) {\n            console.log('[Frames] Using multi-source radar:', frames.length, 'frames from', data?.metadata?.sources?.length || 0, 'sources');\n\n            const frameObjects = frames.map((frame: any) => ({\n              url: frame.url,\n              time: frame.time\n            }));\n\n            // Clear existing caches to ensure fresh animation\n            tileBitmapCache.current.clear();\n            frameCanvasCache.current.clear();\n\n            radarFramesRef.current = frameObjects;\n            setFrameCount(frameObjects.length);\n            setRadarFramesAvailable(frameObjects.length > 0);\n            setRadarSource(data?.metadata?.source || 'multi-source');\n            setLoadingStatus(`Ready: ${frameObjects.length} frames (${data?.metadata?.source || 'Multi-source radar'})`);\n            return;\n          } else {\n            console.warn('[Frames] Multi-source radar returned empty frames array');\n          }\n        } else {\n          console.error('[Frames] Multi-source radar failed:', radarRes.status, radarRes.statusText);\n          const errorText = await radarRes.text().catch(() => 'Unknown error');\n          console.error('[Frames] Error details:', errorText);\n        }\n\n        // Fallback to synthetic (resort snowfall heatmap)\n        console.log('[Frames] Real radar failed, trying synthetic frames...');\n        const synthRes = await fetch('/api/radar/synthetic-frames', {\n          signal: AbortSignal.timeout(3000),\n          headers: {\n            'Cache-Control': 'no-cache'\n          }\n        });\n\n        if (synthRes.ok) {\n          const data = await synthRes.json();\n          const layers = data?.radar?.layers || [];\n\n          if (layers.length > 0) {\n            console.log('[Frames] Using synthetic:', layers.length, 'frames');\n\n            const frameObjects = layers.map((layer: any) => ({\n              url: layer.url,\n              time: layer.timestamp\n            }));\n\n            radarFramesRef.current = frameObjects;\n            setFrameCount(frameObjects.length);\n            setRadarFramesAvailable(frameObjects.length > 0);\n            setRadarSource('synthetic');\n            setLoadingStatus(`Ready: ${frameObjects.length} synthetic frames (IDW from resorts)`);\n            return;\n          }\n        }\n\n        throw new Error('All radar sources failed');\n\n      } catch (e) {\n        console.error('[Frames] Load failed:', e);\n        setLoadingStatus(`Failed to load frames: ${e}`);\n      }\n    };\n\n    loadFrames();\n  }, [mapReady]);\n\n  // Add resort markers with proper popup binding\n  useEffect(() => {\n    if (!mapRef.current || resorts.length === 0) return;\n\n    const map = mapRef.current;\n    const activeIds = new Set(resorts.map(r => r.id));\n\n    markersRef.current.forEach((marker, id) => {\n      if (!activeIds.has(id)) {\n        marker.remove();\n        markersRef.current.delete(id);\n        popupsRef.current.delete(id);\n      }\n    });\n\n    resorts.forEach((resort) => {\n      const cond = conditions[resort.id];\n      const err = errors[resort.id];\n      const isLoading = loading[resort.id];\n\n      let markerColor = '#9CA3AF';\n      let markerRadius = 8;\n      let markerWeight = 2;\n\n      if (err) {\n        markerColor = '#EF4444';\n        markerRadius = 7;\n      } else if (cond) {\n        if (cond.recentSnowfall >= 12) {\n          markerColor = '#0EA5E9'; markerRadius = 12; markerWeight = 3;\n        } else if (cond.recentSnowfall >= 6) {\n          markerColor = '#06B6D4'; markerRadius = 10; markerWeight = 3;\n        } else if (cond.recentSnowfall >= 1) {\n          markerColor = '#3B82F6'; markerRadius = 9;\n        } else {\n          markerColor = '#F59E0B'; markerRadius = 8;\n        }\n      }\n\n      if (markersRef.current.has(resort.id)) {\n        const existing = markersRef.current.get(resort.id)!;\n        existing.setStyle({ fillColor: markerColor, radius: markerRadius, weight: markerWeight });\n        \n        if (popupsRef.current.has(resort.id)) {\n          const popup = popupsRef.current.get(resort.id)!;\n          popup.setContent(buildPopupContent(resort, cond, err, isLoading));\n        }\n        return;\n      }\n\n      const marker = L.circleMarker([resort.lat, resort.lon], {\n        radius: markerRadius,\n        fillColor: markerColor,\n        color: '#FFFFFF',\n        weight: markerWeight,\n        opacity: 1,\n        fillOpacity: 0.9,\n        pane: 'markerPane',\n      }).addTo(map);\n\n      const popupContent = buildPopupContent(resort, cond, err, isLoading);\n      const popup = L.popup({ maxWidth: 320, closeButton: true }).setContent(popupContent);\n      \n      marker.bindPopup(popup);\n      popupsRef.current.set(resort.id, popup);\n\n      marker.on('click', (e) => {\n        if (cond) {\n          setSelectedResort({ resort, conditions: cond });\n        }\n        setTimeout(() => {\n          marker.openPopup();\n        }, 0);\n      });\n\n      marker.on('mouseover', function (this: L.CircleMarker) { this.setRadius(markerRadius * 1.3); });\n      marker.on('mouseout', function (this: L.CircleMarker) { this.setRadius(markerRadius); });\n\n      markersRef.current.set(resort.id, marker);\n    });\n  }, [resorts, conditions, loading, errors]);\n\n  const buildPopupContent = (\n    resort: Resort,\n    cond: ResortConditions | null | undefined,\n    err: string | null | undefined,\n    isLoading: boolean | undefined\n  ): HTMLElement => {\n    const div = document.createElement('div');\n    div.style.cssText = 'font-size: 13px; font-family: system-ui; padding: 8px; min-width: 240px;';\n    \n    let html = `<div style=\"font-weight: bold; font-size: 15px; margin-bottom: 12px; color: #1f2937;\">${resort.name}, ${resort.state}</div>`;\n    \n    if (isLoading) {\n      html += `<div style=\"color: #666; padding: 8px; background: #f3f4f6; border-radius: 4px;\">‚è≥ Loading conditions...</div>`;\n    } else if (err) {\n      html += `<div style=\"color: #DC2626; padding: 8px; background: #fee2e2; border-radius: 4px;\">‚ùå Error: ${err}</div>`;\n    } else if (cond) {\n      // Snowfall section\n      html += `<div style=\"margin-bottom: 12px;\">`;\n      html += `<div style=\"font-weight: 600; font-size: 12px; color: #374151; margin-bottom: 6px; text-transform: uppercase; letter-spacing: 0.5px;\">‚ùÑÔ∏è Snowfall</div>`;\n      html += `<div style=\"display: grid; grid-template-columns: 1fr 1fr; gap: 6px;\">`;\n      html += `<div style=\"background: #dbeafe; padding: 6px; border-radius: 4px; border-left: 3px solid #0EA5E9;\"><div style=\"font-size: 10px; color: #0c4a6e; font-weight: 600;\">24h Total</div><div style=\"color: #0EA5E9; font-weight: bold; font-size: 14px;\">${cond.recentSnowfall}\"</div></div>`;\n      html += `<div style=\"background: #eff6ff; padding: 6px; border-radius: 4px; border-left: 3px solid #3B82F6;\"><div style=\"font-size: 10px; color: #1e40af; font-weight: 600;\">7d Total</div><div style=\"color: #3B82F6; font-weight: bold; font-size: 14px;\">${cond.weeklySnowfall || 0}\"</div></div>`;\n      html += `</div></div>`;\n\n      // Rainfall section\n      html += `<div style=\"margin-bottom: 12px;\">`;\n      html += `<div style=\"font-weight: 600; font-size: 12px; color: #374151; margin-bottom: 6px; text-transform: uppercase; letter-spacing: 0.5px;\">üåßÔ∏è Rainfall</div>`;\n      html += `<div style=\"display: grid; grid-template-columns: 1fr 1fr; gap: 6px;\">`;\n      html += `<div style=\"background: #f0f9ff; padding: 6px; border-radius: 4px; border-left: 3px solid #06b6d4;\"><div style=\"font-size: 10px; color: #0c4a6e; font-weight: 600;\">24h Total</div><div style=\"color: #06b6d4; font-weight: bold; font-size: 14px;\">${(cond.recentRainfall || 0).toFixed(1)}\"</div></div>`;\n      html += `<div style=\"background: #f0fdf4; padding: 6px; border-radius: 4px; border-left: 3px solid #10b981;\"><div style=\"font-size: 10px; color: #166534; font-weight: 600;\">7d Total</div><div style=\"color: #10b981; font-weight: bold; font-size: 14px;\">${(cond.weeklyRainfall || 0).toFixed(1)}\"</div></div>`;\n      html += `</div></div>`;\n\n      // Current conditions section\n      html += `<div style=\"margin-bottom: 12px;\">`;\n      html += `<div style=\"font-weight: 600; font-size: 12px; color: #374151; margin-bottom: 6px; text-transform: uppercase; letter-spacing: 0.5px;\">üå°Ô∏è Current Conditions</div>`;\n      html += `<div style=\"display: grid; grid-template-columns: 1fr 1fr; gap: 6px;\">`;\n      html += `<div style=\"background: #fef2f2; padding: 6px; border-radius: 4px; border-left: 3px solid #EF4444;\"><div style=\"font-size: 10px; color: #7f1d1d; font-weight: 600;\">Temperature</div><div style=\"color: #EF4444; font-weight: bold; font-size: 14px;\">${cond.baseTemp}¬∞F</div></div>`;\n      html += `<div style=\"background: #f3f4f6; padding: 6px; border-radius: 4px; border-left: 3px solid #6b7280;\"><div style=\"font-size: 10px; color: #374151; font-weight: 600;\">Wind Speed</div><div style=\"color: #374151; font-weight: bold; font-size: 14px;\">${cond.windSpeed} mph</div></div>`;\n      html += `</div></div>`;\n      \n      if (resort.conditionsUrl || resort.scrapeUrl) {\n        const url = resort.conditionsUrl || resort.scrapeUrl;\n        html += `<a href=\"${url}\" target=\"_blank\" rel=\"noopener noreferrer\" style=\"display: block; background: #0EA5E9; color: white; padding: 10px 12px; border-radius: 4px; font-weight: 600; font-size: 12px; text-decoration: none; text-align: center; cursor: pointer; margin-top: 8px; transition: background 0.2s;\">ÔøΩ View Live Conditions ‚Üí</a>`;\n      }\n    }\n    \n    div.innerHTML = html;\n    return div;\n  };\n\n  const getTileBitmap = async (\n    layer: string | { url: string; time?: number },\n    z: number,\n    x: number,\n    y: number\n  ): Promise<ImageBitmap | null> => {\n    const layerStr = typeof layer === 'string' ? layer : layer.url;\n    const key = `${layerStr}_${z}_${x}_${y}`;\n    if (tileBitmapCache.current.has(key)) return tileBitmapCache.current.get(key) || null;\n\n    try {\n      let url: string;\n\n      // Handle synthetic radar URLs directly\n      if (layerStr.includes('/api/radar/synthetic?hour=')) {\n        // Extract hour parameter and build tile URL\n        const hourMatch = layerStr.match(/hour=(\\d+)/);\n        if (hourMatch) {\n          const hour = hourMatch[1];\n          url = `/api/radar/synthetic?hour=${hour}&z=${z}&x=${x}&y=${y}`;\n        } else {\n          return null;\n        }\n      } else {\n        // Extract timestamp from layer string (format: \"source-timestamp\")\n        const timestamp = layerStr.split('-').pop();\n        const timeParam = timestamp && !isNaN(parseInt(timestamp)) ? parseInt(timestamp) : Date.now();\n        url = `/api/radar/tile?time=${timeParam}&z=${z}&x=${x}&y=${y}`;\n      }\n\n      const resp = await fetch(url, {\n        signal: AbortSignal.timeout(5000),\n      });\n      if (!resp.ok) return null;\n\n      const blob = await resp.blob();\n      if (blob.size === 0) return null;\n\n      const bitmap = await createImageBitmap(blob);\n      tileBitmapCache.current.set(key, bitmap);\n\n      if (tileBitmapCache.current.size > 256) {\n        const firstKey = tileBitmapCache.current.keys().next().value;\n        if (firstKey) tileBitmapCache.current.delete(firstKey);\n      }\n      return bitmap;\n    } catch (e) {\n      return null;\n    }\n  };\n\n  const renderFrameToCanvas = async (\n    layer: string | { url: string; time?: number },\n    z: number,\n    widthPx: number,\n    heightPx: number,\n    key: string\n  ): Promise<HTMLCanvasElement | null> => {\n    if (frameCanvasCache.current.has(key)) return frameCanvasCache.current.get(key) || null;\n\n    try {\n      const dpr = window.devicePixelRatio || 1;\n      const c = document.createElement('canvas');\n      c.width = widthPx * dpr;\n      c.height = heightPx * dpr;\n\n      const ctx = c.getContext('2d');\n      if (!ctx) return null;\n      ctx.setTransform(dpr, 0, 0, dpr, 0, 0);\n\n      const map = mapRef.current;\n      if (!map) return null;\n\n      const size = map.getSize();\n      const center = map.getCenter();\n      const centerWorld = (map as any).project(center, z);\n      const leftWorldX = centerWorld.x - size.x / 2;\n      const topWorldY = centerWorld.y - size.y / 2;\n\n      const xMin = Math.floor(leftWorldX / 256);\n      const xMax = Math.floor((leftWorldX + size.x) / 256);\n      const yMin = Math.floor(topWorldY / 256);\n      const yMax = Math.floor((topWorldY + size.y) / 256);\n      const tilesAcross = Math.pow(2, z);\n\n      const tilePromises: Promise<void>[] = [];\n      for (let tx = xMin; tx <= xMax; tx++) {\n        for (let ty = yMin; ty <= yMax; ty++) {\n          const wrapX = ((tx % tilesAcross) + tilesAcross) % tilesAcross;\n          const wrapY = ty;\n          if (wrapY < 0 || wrapY >= tilesAcross) continue;\n\n          tilePromises.push(\n            (async () => {\n              const bitmap = await getTileBitmap(layer, z, wrapX, wrapY);\n              if (!bitmap) return;\n\n              const tileWorldX = tx * 256;\n              const tileWorldY = ty * 256;\n              const canvasX = (tileWorldX - leftWorldX) * dpr;\n              const canvasY = (tileWorldY - topWorldY) * dpr;\n              ctx.drawImage(bitmap, canvasX, canvasY, 256 * dpr, 256 * dpr);\n            })()\n          );\n        }\n      }\n\n      const limit = 6;\n      for (let i = 0; i < tilePromises.length; i += limit) {\n        await Promise.all(tilePromises.slice(i, i + limit));\n      }\n\n      frameCanvasCache.current.set(key, c);\n      if (frameCanvasCache.current.size > 32) {\n        const firstKey = frameCanvasCache.current.keys().next().value;\n        if (firstKey) frameCanvasCache.current.delete(firstKey);\n      }\n      return c;\n    } catch (e) {\n      return null;\n    }\n  };\n\n  useEffect(() => {\n    let lastTime = performance.now();\n    let progress = 0;\n    let currentFrameIndex = 0;\n    let nextFrameIndex = 1;\n\n    // Calculate proper frame timing based on timestamps\n    const calculateFrameDuration = () => {\n      const frames = radarFramesRef.current;\n      if (frames.length < 2) return 800; // fallback\n\n      // Get timestamps from frames\n      const timestamps = frames.map(f => f.time).filter((t): t is number => t !== undefined && !isNaN(t)).sort((a, b) => a - b);\n      if (timestamps.length < 2) return 800;\n\n      const timeSpanMs = timestamps[timestamps.length - 1] - timestamps[0]; // Total time span in ms\n      const desiredAnimationDurationMs = 60000; // 60 seconds for full animation\n      const frameDuration = desiredAnimationDurationMs / frames.length;\n\n      console.log(`[Animation] Time span: ${timeSpanMs}ms (${timeSpanMs/3600000}h), Frame duration: ${frameDuration}ms`);\n      return Math.max(100, Math.min(frameDuration, 2000)); // Clamp between 100ms and 2000ms\n    };\n\n    const frameDuration = calculateFrameDuration();\n\n    const step = async (now: number) => {\n      const c1 = canvasRef.current;\n      const c2 = canvas2Ref.current;\n      if (!c1 || !c2) { rafRef.current = requestAnimationFrame(step); return; }\n\n      if (!radarPlayingRef.current || !radarFramesAvailable) {\n        rafRef.current = requestAnimationFrame(step);\n        return;\n      }\n\n      const frames = radarFramesRef.current;\n      if (!frames || frames.length === 0) { rafRef.current = requestAnimationFrame(step); return; }\n\n      if (mapPanZoomRef.current.panning || mapPanZoomRef.current.zooming) {\n        // During pan/zoom, continue rendering with cached frames but skip expensive operations\n        const timeSinceLastRender = now - lastRenderTimeRef.current;\n        if (timeSinceLastRender < 200) {\n          rafRef.current = requestAnimationFrame(step);\n          return;\n        }\n\n        const map = mapRef.current;\n        if (!map) { rafRef.current = requestAnimationFrame(step); return; }\n\n        const z = Math.max(0, Math.round(map.getZoom() || 5));\n        const size = map.getSize();\n        const idx = Math.floor(radarIndexRef.current) % frames.length;\n        if (idx < 0 || idx >= frames.length || !frames[idx]) {\n          rafRef.current = requestAnimationFrame(step);\n          return;\n        }\n        const key = `${frames[idx].url}_${z}_${size.x}_${size.y}`;\n\n        if (frameCanvasCache.current.has(key)) {\n          const cachedC = frameCanvasCache.current.get(key);\n          if (cachedC) {\n            const ctx1 = c1.getContext('2d');\n            const ctx2 = c2.getContext('2d');\n            if (ctx1 && ctx2) {\n              ctx1.clearRect(0, 0, c1.width, c1.height);\n              ctx2.clearRect(0, 0, c2.width, c2.height);\n              ctx1.drawImage(cachedC, 0, 0);\n              ctx2.drawImage(cachedC, 0, 0);\n              c1.style.opacity = '1';\n              c2.style.opacity = '0';\n              lastRenderTimeRef.current = now;\n            }\n          }\n        }\n\n        rafRef.current = requestAnimationFrame(step);\n        return;\n      }\n\n      const elapsed = now - lastTime;\n      lastTime = now;\n      progress += elapsed;\n\n      const dur = frameDuration; // Use calculated frame duration instead of radarSpeedMs\n      const t = Math.min(1, progress / dur);\n\n      const timeSinceLastRender = now - lastRenderTimeRef.current;\n      if (timeSinceLastRender < 50) {\n        rafRef.current = requestAnimationFrame(step);\n        return;\n      }\n\n      try {\n        const map = mapRef.current;\n        if (!map) { rafRef.current = requestAnimationFrame(step); return; }\n\n        const z = Math.max(0, Math.round(map.getZoom() || 5));\n        const size = map.getSize();\n\n        // Update frame indices based on progress\n        const totalFrames = frames.length;\n        const frameProgress = (radarIndexRef.current + t) % totalFrames;\n        currentFrameIndex = Math.floor(frameProgress) % totalFrames;\n        nextFrameIndex = (currentFrameIndex + 1) % totalFrames;\n        const frameBlend = frameProgress - Math.floor(frameProgress);\n\n        // Update radarIndexRef.current continuously for smooth progression\n        radarIndexRef.current = Math.floor(frameProgress) % totalFrames;\n\n        // Update current frame timestamp for overlay\n        const currentFrame = frames[Math.floor(radarIndexRef.current)];\n        if (currentFrame?.time) {\n          setCurrentFrameTime(currentFrame.time);\n        }\n\n        // Safety check for frame indices\n        if (currentFrameIndex < 0 || currentFrameIndex >= frames.length || !frames[currentFrameIndex] ||\n            nextFrameIndex < 0 || nextFrameIndex >= frames.length || !frames[nextFrameIndex]) {\n          rafRef.current = requestAnimationFrame(step);\n          return;\n        }\n\n        const keyCurrent = `${frames[currentFrameIndex].url}_${z}_${size.x}_${size.y}`;\n        const keyNext = `${frames[nextFrameIndex].url}_${z}_${size.x}_${size.y}`;\n\n        // Render current frame to canvas1\n        const currentFrameC = await renderFrameToCanvas(frames[currentFrameIndex], z, size.x, size.y, keyCurrent);\n        if (currentFrameC) {\n          const ctx1 = c1.getContext('2d');\n          if (ctx1) {\n            ctx1.clearRect(0, 0, c1.width, c1.height);\n            ctx1.drawImage(currentFrameC, 0, 0);\n          }\n        }\n\n        // Render next frame to canvas2\n        const nextFrameC = await renderFrameToCanvas(frames[nextFrameIndex], z, size.x, size.y, keyNext);\n        if (nextFrameC) {\n          const ctx2 = c2.getContext('2d');\n          if (ctx2) {\n            ctx2.clearRect(0, 0, c2.width, c2.height);\n            ctx2.drawImage(nextFrameC, 0, 0);\n          }\n        }\n\n        // Smooth cross-fade using JavaScript opacity updates (no CSS transitions)\n        const easeInOut = 0.5 - 0.5 * Math.cos(frameBlend * Math.PI);\n        const canvas1Opacity = (1 - easeInOut) * radarOpacity;\n        const canvas2Opacity = easeInOut * radarOpacity;\n\n        c1.style.opacity = canvas1Opacity.toString();\n        c2.style.opacity = canvas2Opacity.toString();\n\n        // Ensure both canvases are visible during cross-fade\n        c1.style.display = canvas1Opacity > 0.01 ? 'block' : 'none';\n        c2.style.display = canvas2Opacity > 0.01 ? 'block' : 'none';\n\n        lastRenderTimeRef.current = now;\n\n        if (progress >= dur) {\n          progress = 0;\n          radarIndexRef.current = (radarIndexRef.current + 1) % frames.length;\n        }\n      } catch (e) { }\n\n      rafRef.current = requestAnimationFrame(step);\n    };\n\n    rafRef.current = requestAnimationFrame(step);\n    return () => { if (rafRef.current) cancelAnimationFrame(rafRef.current); };\n  }, [radarFramesAvailable]);  useEffect(() => {\n    if (canvasRef.current) canvasRef.current.style.opacity = String(radarOpacity);\n    if (canvas2Ref.current) canvas2Ref.current.style.opacity = String(radarOpacity);\n  }, [radarOpacity]);\n\n  // Prepare resorts with conditions for sidebar\n  const resortsWithConditions = resorts\n    .map(resort => {\n      const cond = conditions[resort.id];\n      if (!cond) return null;\n      return {\n        id: resort.id,\n        name: resort.name,\n        state: resort.state,\n        recentSnowfall: cond.recentSnowfall,\n        snowDepth: cond.snowDepth,\n        baseTemp: cond.baseTemp,\n      };\n    })\n    .filter(Boolean) as Array<{\n      id: string;\n      name: string;\n      state: string;\n      recentSnowfall: number;\n      snowDepth: number;\n      baseTemp: number;\n    }>;\n\n  return (\n    <div className=\"relative w-full h-screen bg-gray-100 flex flex-col\">\n      <div ref={containerRef} className=\"flex-1 w-full\" style={{ position: 'relative', width: '100%', height: '100%', minHeight: '400px' }} />\n\n      {/* Modern Radar Controls */}\n      {radarFramesAvailable && (\n        <RadarControls\n          isPlaying={radarPlaying}\n          onPlayPause={handlePlayPause}\n          opacity={radarOpacity}\n          onOpacityChange={setRadarOpacity}\n          speed={radarSpeedMs}\n          onSpeedChange={setRadarSpeedMs}\n          frameCount={frameCount}\n          currentFrame={radarIndexRef.current + 1}\n          radarSource={radarSource}\n        />\n      )}\n\n      {/* Radar Timeline */}\n      {radarFramesAvailable && radarFramesRef.current.length > 0 && (\n        <RadarTimeline\n          frames={radarFramesRef.current}\n          currentFrameIndex={radarIndexRef.current}\n          isPlaying={radarPlaying}\n          onFrameSelect={handleFrameSelect}\n          onPlayPause={handlePlayPause}\n        />\n      )}\n\n      {/* Timestamp Overlay */}\n      {radarFramesAvailable && currentFrameTime && (\n        <div className=\"absolute top-4 right-4 z-[1000] bg-black/80 text-white px-4 py-2 rounded-lg font-mono text-sm font-bold shadow-lg border border-white/20\">\n          {(() => {\n            const now = Date.now();\n            const diffHours = Math.floor((now - currentFrameTime) / (1000 * 60 * 60));\n            const diffMinutes = Math.floor((now - currentFrameTime) / (1000 * 60)) % 60;\n\n            if (diffHours === 0 && diffMinutes === 0) return 'NOW';\n            if (diffHours === 0) return `${diffMinutes}m ago`;\n            if (diffHours < 24) return `${diffHours}h ${diffMinutes}m ago`;\n            const diffDays = Math.floor(diffHours / 24);\n            return `${diffDays}d ago`;\n          })()}\n        </div>\n      )}\n\n      {selectedResort && (\n        <div className=\"absolute top-4 right-4 z-[99999] bg-white/95 rounded-lg p-5 shadow-lg max-w-sm\">\n          <button onClick={() => setSelectedResort(null)} className=\"absolute top-2 right-2 text-gray-500 hover:text-gray-700 text-lg font-bold\">‚úï</button>\n          <div className=\"font-bold text-gray-800 text-base mb-3\">üìä {selectedResort.resort.name}</div>\n          <div className=\"space-y-2 text-sm\">\n            <div className=\"flex justify-between items-center\">\n              <span className=\"text-gray-700 font-semibold\">24h Snowfall:</span>\n              <span className=\"text-blue-600 font-bold text-lg\">{selectedResort.conditions.recentSnowfall}\"</span>\n            </div>\n            <div className=\"flex justify-between items-center\">\n              <span className=\"text-gray-700 font-semibold\">Weekly Total:</span>\n              <span className=\"text-blue-500 font-bold text-lg\">{selectedResort.conditions.weeklySnowfall || 'N/A'}\"</span>\n            </div>\n            <div className=\"flex justify-between items-center\">\n              <span className=\"text-gray-700 font-semibold\">Base Depth:</span>\n              <span className=\"text-gray-700 font-bold text-lg\">{selectedResort.conditions.snowDepth}\"</span>\n            </div>\n            <div className=\"flex justify-between items-center\">\n              <span className=\"text-gray-700 font-semibold\">Temperature:</span>\n              <span className=\"text-red-600 font-bold text-lg\">{selectedResort.conditions.baseTemp}¬∞F</span>\n            </div>\n            <div className=\"flex justify-between items-center\">\n              <span className=\"text-gray-700 font-semibold\">Wind:</span>\n              <span className=\"text-gray-700 font-bold\">{selectedResort.conditions.windSpeed} mph</span>\n            </div>\n            <div className=\"flex justify-between items-center\">\n              <span className=\"text-gray-700 font-semibold\">Visibility:</span>\n              <span className=\"text-gray-700 font-bold\">{selectedResort.conditions.visibility}</span>\n            </div>\n            {(selectedResort.resort.conditionsUrl || selectedResort.resort.scrapeUrl) && (\n              <a \n                href={selectedResort.resort.conditionsUrl || selectedResort.resort.scrapeUrl} \n                target=\"_blank\" \n                rel=\"noopener noreferrer\"\n                className=\"block mt-4 text-center bg-blue-500 hover:bg-blue-600 text-white font-bold py-2 px-4 rounded-lg transition\"\n              >\n                View Full Report ‚Üí\n              </a>\n            )}\n          </div>\n        </div>\n      )}\n\n      {/* Resort Sidebar */}\n      <ResortSidebar resorts={resortsWithConditions} />\n    </div>\n  );\n};\n\nexport default ResortMap;"],"names":[],"mappings":"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"}}]
}